import{u as V,r as t,a as q,q as U,t as C,w as J,x as K,j as e,L as N}from"./index-c94445e5.js";import{P as o}from"./index-8100b1b7.js";import{$ as v,P as S,f as T,I as _}from"./constants-e7fb752e.js";import{C as Q,S as W,F as Y,M as A,a as I,b as Z,n as ee}from"./ProductList-3549176a.js";import{P as se}from"./Pagination-0c5e0b0a.js";import{i as b,X as ae,v as g,N as te}from"./Navbar-3620375d.js";import{S as le}from"./StarIcon-3d47d67a.js";import{_ as $}from"./dialog-d13693b7.js";import{F as re}from"./Footer-86d710bc.js";import"./logo-98457f0e.js";import"./description-d3978e3b.js";const ie=[{name:"Best Rating",sort:"rating",order:"desc",current:!1},{name:"Price: Low to High",sort:"discountPrice",order:"asc",current:!1},{name:"Price: High to Low",sort:"discountPrice",order:"desc",current:!1}];function E(...l){return l.filter(Boolean).join(" ")}const ne=()=>{const l=V(),[c,s]=t.useState(!1),{products:n,totalItems:a,categories:m,brands:d,productLoading:j}=q(U),[u,w]=t.useState({}),[f,R]=t.useState({}),[p,y]=t.useState(1),k=t.useRef(""),F=[{id:"category",name:"Category",options:m},{id:"brand",name:"Brands",options:d}],P=t.useCallback((r,i,x)=>{w(G=>{const h={...G};if(r.target.checked)h[i.id]?h[i.id].push(x.value):h[i.id]=[x.value];else{const H=h[i.id].findIndex(X=>X===x.value);h[i.id].splice(H,1)}return h})},[w]),D=t.useCallback((r,i)=>{r.preventDefault();const x={...f,_sort:i.sort,_order:i.order};R(x)},[f]),O=t.useCallback(r=>{y(r)},[y]);t.useEffect(()=>{l(C({filter:u,sort:f,pagination:{_page:p,_limit:_},admin:!0}))},[l,u,f,p]),t.useEffect(()=>{y(1)},[a]),t.useEffect(()=>{m.length===0&&l(J()),d.length===0&&l(K())},[]);const z=r=>{r.preventDefault(),l(C({filter:u,sort:f,pagination:{_page:p,_limit:_},search:k.current.value}))};return e.jsx("div",{className:"bg-white dark:bg-slate-900",children:e.jsxs("div",{children:[e.jsx(B,{mobileFiltersOpen:c,setMobileFiltersOpen:s,handleFilter:P,filters:F}),e.jsx("form",{onSubmit:z,children:e.jsxs("div",{className:"pt-2  text-gray-600 flex items-center  dark:text-slate-300",children:[e.jsx("input",{className:"border-2 border-gray-300 dark:text-slate-200 dark:bg-slate-600 bg-white h-10 px-5 rounded-lg text-sm focus:outline-none w-full",type:"search",name:"search",ref:k,placeholder:"Search"}),e.jsx("button",{type:"submit",className:"ml-4",children:e.jsx("svg",{className:"text-gray-600 dark:text-gray-300 h-6 w-6 fill-current",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 56.966 56.966",style:{enableBackground:"new 0 0 56.966 56.966"},xmlSpace:"preserve",width:"512px",height:"512px",children:e.jsx("path",{d:"M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"})})})]})}),e.jsxs("main",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-baseline justify-between border-b border-gray-200 py-6",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 dark:text-slate-200",children:"All Products"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs(b,{as:"div",className:"relative inline-block text-left",children:[e.jsx("div",{children:e.jsxs(b.Button,{className:"group inline-flex justify-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-slate-200 dark:hover:text-slate-100",children:["Sort",e.jsx(Q,{className:"-mr-1 ml-1 h-5 w-5 flex-shrink-0 text-gray-400 group-hover:text-gray-500 dark:group-hover:text-gray-200","aria-hidden":"true"})]})}),e.jsx(v,{as:t.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx(b.Items,{className:"absolute right-0 z-10 mt-2 w-40 origin-top-right rounded-md bg-white shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none dark:bg-slate-600",children:e.jsx("div",{className:"py-1",children:ie.map(r=>e.jsx(b.Item,{children:({active:i})=>e.jsx("button",{onClick:x=>D(x,r),className:E(r.current?"font-medium text-gray-900 dark:text-slate-100":"text-gray-500 dark:text-slate-200",i?"bg-gray-100 dark:bg-gray-700":"","block px-4 py-2 text-sm"),children:r.name})},r.name))})})})]}),e.jsxs("button",{type:"button",className:"-m-2 ml-5 p-2 text-gray-400 hover:text-gray-500 sm:ml-7",children:[e.jsx("span",{className:"sr-only",children:"View grid"}),e.jsx(W,{className:"h-5 w-5","aria-hidden":"true"})]}),e.jsxs("button",{type:"button",className:"-m-2 ml-4 p-2 text-gray-400 hover:text-gray-500 sm:ml-6 lg:hidden",onClick:()=>s(!0),children:[e.jsx("span",{className:"sr-only",children:"Filters"}),e.jsx(Y,{className:"h-5 w-5","aria-hidden":"true"})]})]})]}),e.jsx("section",{"aria-labelledby":"products-heading",className:"pb-24 pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-8 gap-y-10 lg:grid-cols-4",children:[e.jsx(L,{handleFilter:P,filters:F}),e.jsx(M,{products:n,productLoading:j})]})}),e.jsx(se,{handlePage:O,page:p,setPage:y,totalItems:a})]})]})})};function B({mobileFiltersOpen:l,setMobileFiltersOpen:c,handleFilter:s,filters:n}){return e.jsx(v.Root,{show:l,as:t.Fragment,children:e.jsxs($,{as:"div",className:"relative z-40 lg:hidden",onClose:c,children:[e.jsx(v.Child,{as:t.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 z-40 flex",children:e.jsx(v.Child,{as:t.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsxs($.Panel,{className:"relative ml-auto flex h-full w-full max-w-xs flex-col overflow-y-auto bg-white py-4 pb-12 shadow-xl dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-slate-200",children:"Filters"}),e.jsxs("button",{type:"button",className:"-mr-2 flex h-10 w-10 items-center justify-center rounded-md bg-white p-2 text-gray-400 dark:bg-slate-900",onClick:()=>c(!1),children:[e.jsx("span",{className:"sr-only",children:"Close menu"}),e.jsx(ae,{className:"h-6 w-6","aria-hidden":"true"})]})]}),e.jsx("form",{className:"mt-4 border-t border-gray-200",children:n.map(a=>e.jsx(g,{as:"div",className:"border-t border-gray-200 px-4 py-6",children:({open:m})=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"-mx-2 -my-3 flow-root",children:e.jsxs(g.Button,{className:"flex w-full items-center justify-between bg-white px-2 py-3 text-gray-400 hover:text-gray-500 dark:bg-slate-900",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-slate-200",children:a.name}),e.jsx("span",{className:"ml-6 flex items-center",children:m?e.jsx(A,{className:"h-5 w-5","aria-hidden":"true"}):e.jsx(I,{className:"h-5 w-5","aria-hidden":"true"})})]})}),e.jsx(g.Panel,{className:"pt-6",children:e.jsx("div",{className:"space-y-6",children:a==null?void 0:a.options.map((d,j)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:`filter-mobile-${a.id}-${j}`,name:`${a.id}[]`,defaultValue:d.value,type:"checkbox",defaultChecked:d.checked,onChange:u=>s(u,a,d),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("label",{htmlFor:`filter-mobile-${a.id}-${j}`,className:"ml-3 min-w-0 flex-1 text-gray-500",children:d.label})]},d.value))})})]})},a.id))})]})})})]})})}B.propTypes={mobileFiltersOpen:o.bool,setMobileFiltersOpen:o.func,handleFilter:o.func,filters:o.array};function L({handleFilter:l,filters:c}){return e.jsx("form",{className:"hidden lg:block",children:c.map(s=>e.jsx(g,{as:"div",className:"border-b border-gray-200 py-6",children:({open:n})=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"-my-3 flow-root",children:e.jsxs(g.Button,{className:"flex w-full items-center justify-between bg-white py-3 text-sm text-gray-400 hover:text-gray-500 dark:bg-slate-900",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-slate-200",children:s.name}),e.jsx("span",{className:"ml-6 flex items-center",children:n?e.jsx(A,{className:"h-5 w-5","aria-hidden":"true"}):e.jsx(I,{className:"h-5 w-5","aria-hidden":"true"})})]})}),e.jsx(g.Panel,{className:"pt-6",children:e.jsx("div",{className:"space-y-4",children:s.options.map((a,m)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:`filter-${s.id}-${m}`,name:`${s.id}[]`,defaultValue:a.value,type:"checkbox",onChange:d=>l(d,s,a),defaultChecked:a.checked,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("label",{htmlFor:`filter-${s.id}-${m}`,className:"ml-3 text-sm text-gray-600 dark:text-slate-200",children:a.label})]},a.value))})})]})},s.id))})}L.propTypes={handleFilter:o.func,filters:o.array};function M({products:l,productLoading:c}){return c?e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"mx-auto max-w-2xl px-4 py-0 sm:px-6 sm:py-0 lg:max-w-7xl lg:px-8",children:e.jsx("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:gap-x-8",children:Array.from({length:10},(s,n)=>e.jsx(Z,{},n))})})}):!c&&l.length===0?e.jsxs("div",{className:"lg:col-span-3 flex justify-start flex-col",children:[e.jsx("h2",{className:"text-center text-lg font-medium text-gray-900 dark:text-slate-200",children:"No Product Found"}),e.jsx("img",{src:ee,alt:"no-product"})]}):e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"mx-auto max-w-2xl px-4 py-0  sm:px-6 sm:py-0 lg:max-w-7xl lg:px-8",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{to:"/admin/product-form",className:"rounded-md bg-green-600 my-2 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Add Product"})}),e.jsx("div",{className:"mt-6 grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:gap-x-8",children:l.map(s=>{var n;return e.jsxs("div",{children:[e.jsx(N,{to:`/admin/product-detail/${s.id}`,children:e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-md bg-gray-200 lg:aspect-none group-hover:opacity-75 lg:h-60 min-h-60",children:e.jsx("img",{src:s.thumbnail,alt:s.title,className:"h-full w-full object-cover object-center lg:h-full lg:w-full"})}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm text-gray-700 dark:text-slate-200",children:[e.jsx("span",{"aria-hidden":"true",className:"absolute inset-0"}),((n=s==null?void 0:s.title)==null?void 0:n.length)>S?s.title.substring(0,S)+"...":s.title]}),e.jsx("div",{className:"mt-1 text-sm text-gray-500 flex items-center",children:e.jsx("div",{className:"flex items-center",children:[0,1,2,3,4].map(a=>e.jsx(le,{className:E((s==null?void 0:s.averageRating)>a?"text-yellow-500":"text-gray-300","h-5 w-5 flex-shrink-0"),"aria-hidden":"true"},a))})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-slate-200",children:T(s==null?void 0:s.discountPrice)}),e.jsx("div",{className:"inline",children:e.jsx("p",{className:"text-sm font-medium text-gray-400 line-through",children:T(s==null?void 0:s.price)})})]})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(N,{to:`/admin/product-form/edit/${s.id}`,className:"rounded-md bg-indigo-600 my-2 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Edit Product"})}),s.deleted&&e.jsx("div",{children:e.jsx("p",{className:"text-sm text-red-500",children:"Product Deleted"})}),s.stock===0&&e.jsx("div",{children:e.jsx("p",{className:"text-sm text-red-500",children:"Out of Stock"})})]},s.id)})})]})})})}M.propTypes={products:o.array,productLoading:o.bool};const ye=()=>e.jsxs(e.Fragment,{children:[e.jsx(te,{title:"Products",children:e.jsx(ne,{})}),e.jsx(re,{})]});export{ye as default};
