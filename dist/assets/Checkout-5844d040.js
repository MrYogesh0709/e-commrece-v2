import{u as B,r as x,a as m,g as D,k as T,m as V,j as e,N as g,L as Z,o as G,n as H,i as J,p as K,Q as W}from"./index-c94445e5.js";import{u as X}from"./index.esm-557db087.js";import{M as Y}from"./Modal-a3c13a84.js";import{f as O}from"./constants-e7fb752e.js";import"./index-8100b1b7.js";import"./dialog-d13693b7.js";import"./description-d3978e3b.js";function _(...d){return d.filter(Boolean).join(" ")}const ne=()=>{var f,b,N,v,k,w,C,S;const d=B(),[I,h]=x.useState(null),{cartItems:r}=m(D),{userInfo:n}=m(T),{currentOrder:i}=m(V),[u,L]=x.useState(null),[c,R]=x.useState("cash"),{register:l,handleSubmit:E,reset:p,formState:{errors:t}}=X(),y=Math.round(r.reduce((s,a)=>a.product.discountPrice*a.quantity+s,0)),o=r.reduce((s,a)=>a.quantity+s,0),j=s=>{R(s.target.value)},$=s=>{try{d(H({...s})),p()}catch(a){console.log(a)}},z=(s,a)=>{d(J(a))},Q=()=>{u&&c?d(K({items:r,totalAmount:y,totalItems:o,user:n,paymentMethod:c,selectedAddress:u})):W.error("Select a payment method and Address")};return r.length===0?e.jsx(g,{to:"/",replace:!0}):i&&i.paymentMethod==="cash"?e.jsx(g,{to:`/order-success/${i.id}`,replace:!0}):i&&i.paymentMethod==="card"?e.jsx(g,{to:"/stripe-pay",replace:!0}):e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-x-8 gap-y-10 lg:grid-cols-5",children:[e.jsx("div",{className:"lg:col-span-3 mt-12",children:e.jsx("form",{noValidate:!0,className:"bg-white dark:bg-slate-900",onSubmit:E($),children:e.jsxs("div",{className:"space-y-12",children:[e.jsxs("div",{className:"border-b border-gray-900/10 pb-12",children:[e.jsx("h2",{className:"text-3xl font-semibold leading-7 text-gray-900 dark:text-slate-200",children:"Personal Information"}),e.jsx("p",{className:"mt-1 text-sm leading-6 text-gray-600 dark:text-slate-400",children:"Use a permanent address where you can receive mail."}),e.jsxs("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-5",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium leading-6 text-gray-900 dark:text-slate-200",children:"Name"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"text",name:"name",...l("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"},maxLength:{value:20,message:"Name must be less than 20 characters"}}),id:"name",autoComplete:"given-name",className:"block w-full  dark:bg-slate-600 dark:text-slate-200 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),e.jsx("p",{className:"text-red-500",children:t.name&&((f=t.name)==null?void 0:f.message)})]})]}),e.jsxs("div",{className:"sm:col-span-5",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900 dark:text-slate-200",children:"Email address"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{id:"email",...l("email",{required:"Email Address is required",pattern:{value:/\b[\w\.-]+@[\w\.-]+\.\w{2,4}\b/gi,message:"Email not valid"}}),type:"email",autoComplete:"email",className:"block w-full dark:bg-slate-600 dark:text-slate-200 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),e.jsx("p",{className:"text-red-500",children:t.email&&((b=t.email)==null?void 0:b.message)})]})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium leading-6 text-gray-900 dark:text-slate-200",children:"Phone"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{id:"phone",...l("phone",{required:"Phone number is required"}),type:"tel",autoComplete:"phone",className:"block w-full  dark:bg-slate-600 dark:text-slate-200 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),e.jsx("p",{className:"text-red-500",children:t.phone&&((N=t.phone)==null?void 0:N.message)})]})]}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{htmlFor:"street",className:"block text-sm font-medium leading-6 text-gray-900 dark:text-slate-200",children:"Street address"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"text",...l("street",{required:"Street Address is required",maxLength:{value:200,message:"Street address must be under 200 words"}}),id:"street",autoComplete:"street-address",className:"block w-full dark:bg-slate-600 dark:text-slate-200 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),e.jsx("p",{className:"text-red-500",children:t.street&&((v=t.street)==null?void 0:v.message)})]}),e.jsxs("div",{className:"sm:col-span-2 sm:col-start-1",children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium leading-6 text-gray-900 dark:text-slate-200",children:"City"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"text",id:"city",...l("city",{required:"City is required",maxLength:{value:20,message:"City be under 30 characters"}}),autoComplete:"address-level2",className:"block w-full dark:bg-slate-600 dark:text-slate-200 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),e.jsx("p",{className:"text-red-500",children:t.city&&((k=t.city)==null?void 0:k.message)})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium leading-6 text-gray-900 dark:text-slate-200",children:"State / Province"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"text",...l("state",{required:"State is required",maxLength:{value:20,message:"State be under 20 characters"}}),id:"state",autoComplete:"address-level1",className:"block w-full dark:bg-slate-600 dark:text-slate-200 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),e.jsx("p",{className:"text-red-500",children:t.state&&((w=t.state)==null?void 0:w.message)})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"pinCode",className:"block dark:text-slate-200 text-sm font-medium leading-6 text-gray-900",children:"ZIP / Postal code"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"text",...l("pinCode",{required:"Pin-code is required"}),id:"pinCode",autoComplete:"postal-code",className:"block w-full rounded-md dark:bg-slate-600 dark:text-slate-200 border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),e.jsx("p",{className:"text-red-500",children:t.pinCode&&((C=t.pinCode)==null?void 0:C.message)})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[e.jsx("button",{type:"button",onClick:()=>p(),className:"text-sm font-semibold leading-6 text-gray-900 dark:text-slate-200",children:"Reset"}),e.jsx("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Add address"})]}),e.jsxs("div",{className:"border-b border-gray-900/10 pb-12",children:[e.jsx("h2",{className:"text-base font-semibold leading-7 text-gray-900 dark:text-slate-200",children:"Address"}),((S=n==null?void 0:n.addresses)==null?void 0:S.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mt-1 text-sm leading-6 text-gray-600 dark:text-slate-400",children:"Choose from Existing address"}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-100 dark:divide-gray-700",children:n.addresses.map(s=>e.jsxs("li",{className:"flex justify-between gap-x-6 py-5",children:[e.jsxs("div",{className:"flex gap-x-4 items-center",children:[e.jsx("input",{name:"address",type:"radio",className:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600",onChange:()=>L(s),value:s}),e.jsxs("div",{className:"min-w-0 flex-auto",children:[e.jsx("p",{className:"text-sm font-semibold leading-6 text-gray-900 dark:text-slate-200",children:s.name}),e.jsx("p",{className:"mt-1 truncate text-xs leading-5 text-gray-500 dark:text-slate-400",children:s.street}),e.jsx("p",{className:"mt-1 truncate text-xs leading-5 text-gray-500 dark:text-slate-400",children:s.pinCode})]})]}),e.jsxs("div",{className:"sm:flex sm:flex-col sm:items-end",children:[e.jsxs("p",{className:"text-sm leading-6 text-gray-900 dark:text-slate-200",children:["Phone : ",s.phone]}),e.jsx("p",{className:"text-sm leading-6 text-gray-900 dark:text-slate-200",children:s.city})]})]},s.id))})]}):e.jsx("p",{className:"mt-1 leading-6 text-gray-600 dark:text-slate-400",children:"Add a new address"}),e.jsx("div",{className:"mt-10 space-y-10",children:e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-sm font-semibold leading-6 text-gray-900 dark:text-slate-200",children:"Payments Method"}),e.jsx("p",{className:"mt-1 text-sm leading-6 text-gray-600 dark:text-slate-400",children:"Choose One"}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx("input",{id:"cash",name:"payments",type:"radio",onChange:s=>j(s),value:"cash",className:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600",checked:c==="cash"}),e.jsx("label",{htmlFor:"cash",className:"block text-sm font-medium leading-6 text-gray-900 dark:text-slate-200",children:"Cash Payment"})]}),e.jsxs("div",{className:"flex items-center gap-x-3",children:[e.jsx("input",{id:"card",name:"payments",onChange:s=>j(s),type:"radio",value:"card",checked:c==="card",className:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600"}),e.jsx("label",{htmlFor:"card",className:"block text-sm font-medium leading-6 text-gray-900 dark:text-slate-200",children:"Card Payment"})]})]})]})})]})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"mx-auto mt-12 bg-white max-w-7xl px-4 sm:px-6 lg:px-8 dark:bg-slate-600 rounded-lg",children:[e.jsxs("div",{className:"border-gray-200 px-0 py-6 sm:px-0",children:[e.jsx("h1",{className:"text-4xl my-5 font-bold tracking-tight text-gray-900 dark:text-slate-200",children:"Cart"}),e.jsx("div",{className:"flow-root",children:e.jsx("ul",{role:"list",className:"-my-6 divide-y divide-gray-200",children:(r==null?void 0:r.length)>0&&r.map(s=>{var a,q,A,P,F,M;return e.jsxs("li",{className:"flex py-6",children:[e.jsx("div",{className:"h-24 w-24 flex-shrink-0 overflow-hidden rounded-md border border-gray-200",children:e.jsx("img",{src:(a=s==null?void 0:s.product)==null?void 0:a.thumbnail,alt:(q=s==null?void 0:s.product)==null?void 0:q.title,className:"h-full w-full object-cover object-center"})}),e.jsxs("div",{className:"ml-4 flex flex-1 flex-col",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900 dark:text-slate-300",children:[e.jsx("h3",{children:(A=s==null?void 0:s.product)==null?void 0:A.title}),e.jsx("p",{className:"ml-4",children:O((s==null?void 0:s.quantity)*((P=s==null?void 0:s.product)==null?void 0:P.discountPrice))})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-slate-400",children:(F=s==null?void 0:s.product)==null?void 0:F.brand})]}),e.jsxs("div",{className:"flex flex-1 items-end justify-between text-sm",children:[e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsxs("div",{className:"text-gray-500",children:[e.jsx("span",{className:"inline  text-sm font-medium leading-6 text-gray-900 dark:text-slate-300",children:"Qty :"}),e.jsxs("span",{className:"dark:text-slate-300",children:[" ",s==null?void 0:s.quantity]})]}),(s==null?void 0:s.color)&&e.jsxs("div",{className:"flex  items-center gap-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-slate-300",children:"Color"}),e.jsxs("div",{className:"relative -m-0.5 flex cursor-pointer items-center justify-center rounded-full p-0.5 focus:outline-none",children:[e.jsx("span",{className:"sr-only",children:s==null?void 0:s.color.name}),e.jsx("span",{"aria-hidden":"true",className:_(s==null?void 0:s.color.class,"h-8 w-8 rounded-full border border-black dark:border-slate-200 border-opacity-10")})]})]}),(s==null?void 0:s.size)&&e.jsxs("div",{className:"flex  items-center gap-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-slate-200",children:"Size"}),e.jsxs("div",{className:"group relative flex items-center justify-center rounded-md border py-1 px-4 text-sm font-medium uppercase hover:bg-gray-50 focus:outline-none sm:flex-1 sm:py-1 dark:hover:bg-gray-400 dark:text-slate-200",children:[e.jsx("span",{children:(M=s==null?void 0:s.size)==null?void 0:M.name}),e.jsx("span",{className:"pointer-events-none absolute -inset-px rounded-md","aria-hidden":"true"})]})]})]}),e.jsxs("div",{className:"flex",children:[e.jsx(Y,{title:`Remove ${s.product.title}`,message:`Are you sure you want to Remove ${s.product.title} ?`,dangerOption:"Remove",cancelOption:"Cancel",dangerAction:U=>z(U,s.id),cancelAction:()=>h(-1),showModal:I===s.id}),e.jsx("button",{type:"button",onClick:()=>h(s.id),className:"font-medium text-red-400 hover:text-red-500",children:"Remove"})]})]})]})]},s.id)})})})]}),e.jsxs("div",{className:"border-t border-gray-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"flex justify-between my-2 text-base font-medium text-gray-900 dark:text-slate-200",children:[e.jsx("p",{children:"Subtotal"}),e.jsx("p",{children:O(y)})]}),e.jsxs("div",{className:"flex justify-between my-2 text-base font-medium text-gray-900 dark:text-slate-200",children:[e.jsx("p",{children:"Total items in Cart"}),e.jsxs("p",{children:[o," Item",`${o>1?"s":""}`]})]}),e.jsx("p",{className:"mt-0.5 text-sm text-gray-500 dark:text-slate-400",children:"Shipping and taxes calculated at checkout."}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{onClick:Q,className:"flex cursor-pointer items-center justify-center rounded-md border border-transparent bg-indigo-600 px-6 py-3 text-base font-medium text-white shadow-sm hover:bg-indigo-700",children:"Order Now"})}),e.jsx("div",{className:"mt-6 flex justify-center text-center text-sm text-gray-500",children:e.jsxs("p",{children:["or"," ",e.jsxs(Z,{to:"/",type:"button",className:"font-medium text-indigo-600 hover:text-indigo-500",onClick:()=>d(G),children:["Continue Shopping",e.jsx("span",{"aria-hidden":"true",children:" →"})]})]})})]})]})})]})})};export{ne as default};
